<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta name="keywords" content="iPad,VisitorNet,jumpOnJuniper,bookmark,Bookmarklet,maker,generator,javascript,paste,login,pastelet,username,password">
		<meta name="robots" content="index,nofollow">
		<meta name="viewport" content="width=device-width,user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<link rel="shortcut icon" href="img/joj.ico">
		<link rel="apple-touch-icon" href="img/joj-57.png">
		<link rel="apple-touch-icon" sizes="114x114" href="img/joj-114.png">
		<link rel="apple-touch-icon" sizes="72x72" href="img/joj-72.png">
		<link rel="apple-touch-icon" sizes="144x144" href="img/joj-144.png">
		<link rel="canonical" href="http://mmind.me/joj">
		<title>jumpOnJuniper v_MmVERSION_</title>
		<style type="text/css">
			body {
				margin: 0;
				padding: 0 1px 15px 0;
				width: 100%;
				font-family: Helvetica, sans-serif;
				font-size: 17px;
				-webkit-text-size-adjust: none;
				-moz-user-select: none;
				-webkit-user-select: none;
				-moz-appearance: none;
				-webkit-appearance: none
			}
			h1 { font-size: 17px; margin: 14px 9px 6px 20px }
			ol, ul { line-height: 1.3}
			form { border: hidden; margin: 0 }
			.grp {
				margin: 0 10px;
				width: 94%;
				padding: 7px;
				border-radius: 8px;
				border: 1px solid #72ab69;
				background-color: #e0e6e0;
				font-size: 15px
			}
			.fig { margin: 0; padding: 4px 10px }
			.pStr {	font-size: large }
			#bmrk { vertical-align: top; font-family: monospace }
			#mkPltBtn {
				height: 38px;
				width: 172px;
				color: #fafffa;
				border-radius: 0;
				border: 1px solid #2E8022;
				background: #75AC6C;
				margin: 2px 0 4px 33px;
				cursor: pointer;
				display: inline-block;
				vertical-align: baseline;
				text-align: center;
				font: 16px/100% Arial, Helvetica, sans-serif;
				text-shadow: 0 1px 1px rgba(0,0,0,.3);
				-webkit-appearance: none
			}
			#reset {
				height: 24px;
				width: 60px;
				color: #fafffa;
				border-radius: 0;
				border: 1px solid #2E8022;
				background: #75AC6C;
				margin: 2px 0 4px 16px;
				cursor: pointer;
				-webkit-appearance: none
			}
			#mkPltBtn:active, #reset:active { color: #000; background: #2E8022 }
			#yp { vertical-align:top }
		</style>
		<!-- v_MmVERSION_; 2012/04/14 Tom King; build date: _MmBUILDDATE_

			jumpOnJuniper a bookmark-generator to simplify use of Juniper Infranet-based VisitorNet
			generated URL first displays as http://mmind.me/joj?javascript:var%20d='...
			Copyright (c) 2012 Tom King. All rights reserved.
		-->

		<!-- code w/onLoad handler + function to create bookmarklet string -->
		<script type="text/javascript">
			// listener to dynamically position page for initial or return-trip
			window.addEventListener('load', function() {
				if (location.search) {
					// reload form UI from query string
					try {
						var q = location.search, m = [], b = document.getElementById('bmrk');
						q = decodeURIComponent(q.substr(1));
						m = q.match(/^javascript:(.*?)u='(.*?)',p='(.*?)',/);
						if (!m) throw 'No match in: ' + q;
						if (!m[2]) throw 'No login found in: ' + m;
						document.title = 'jOJ ' + m[2].replace(/\W.*/, '');
						document.getElementById('username').value = m[2];
						if (m[3]) document.getElementById('password').value = m[3];
						// put a more human-readable, but URI encoded, version of bookmarklet in textarea
						b.textContent = encodeURI(q);
						// unhide remaining steps
						window.scrollTo(0,200+document.getElementById('pltMkr').scrollHeight);
						// if not iPhone/iPad unhide 'Pastelet as link' and set anchor tag
						if (!(-1 != navigator.userAgent.indexOf('Safari') && -1 != navigator.userAgent.indexOf('Mobile'))) {
							var pal = document.getElementById('pal'), pl = document.getElementById('pl');
							if (pal && pl) {
								pal.setAttribute("style", "display:inline;padding:7px;height:auto");
								pl.setAttribute('href', document.getElementById('bmrk').textContent);
								pl.setAttribute('title', document.title);
								pl.innerHTML = document.title;
							}
						}
						b.select();
						b.focus();
					}
					catch (e) {
						console.log('error: ' + e);
						alert("Unable to decode pastelet.\r\nForm will be reset.");
						location.replace('//' + location.host + location.port + location.pathname);
					}
				}
				// hide address bar
				else window.scrollTo(0,1);
				return;
			}, true);
			// reload page with new bookmarklet appended
			function loadpg(p) {
				if (p) {
					p = 'javascript:' + encodeURIComponent(p);
					document.getElementById('bmrk').textContent = p;
					location.href = '//' + location.host + location.port + location.pathname + '?' + p;
				}
			}

			//	jumpOnJuniper a bookmark-generator to simplify use of Juniper Infranet-based VisitorNet
			//	generated URL first displays as http://mmind.me/joj?javascript:var%20d='...
			//	Copyright (c) 2012 Tom King. All rights reserved
			//
			// Comments- Generated bookmarklet is carefully constructed for current version of VisitorNet
			// *	Bookmarklet code is optimized for size (ie, string length of all the code).
			// *    UserID (email) and password are used inline for tighter code.
			// * void('_MmVERSION_') is a way to embed the version and provides cross-browser compatibility (a non-null return value causes some browsers to navigate)
			//
			// var u = 'user', p = 'pass',
			//	d = document,
			//	h = location.href,
			//	b = d.getElementById('proceedButton'),
			//	s = d.getElementsByName('sn-postauth-proceed')[0],
			//	r = d.getElementById('realm'),
			//	f = d.forms[0];
			// if (h.match(/visitornet(.*?)p=sn-postauth-show/)) b ? b.click() : s.click(), f.submit(); // click agreement
			// else if (h.match(/(^data:text\/html;.*|(mmind\\.me|mobilemind\\..*?) \\/joj(\\/|\\?) ?.*|visitornet(.*?)welcome\\.cgi|^data:)$/)) {
			//	// fill-in login form
			//	r ? r.selectedIndex = 1 : 0;
			//	d.getElementById('username').value = u;
			//	d.getElementById('password').value = p;
			//	d.getElementById('frmLogin') ? d.getElementById('frmLogin').submit() : 0
			// } else location.href = 'https://visitornet.boeing.com'; // redirect to login form
			// void'_MmVERSION_'

			// creates & returns bookmarklet given 'u' = usr ID and 'p' = pass
			function pastelet(u,p) {
				if (u + p) {
					u = u.match(/^\s*(\S*?)\s*$/)[1]; // strip leading/trailing spaces to help w/iOS 5 shortcut text
					p = "var u='" + u + "',p='" + p + "',d=document,h=location.href,b=d.getElementById('proceedButton'),s=d.getElementsByName('sn-postauth-proceed')[0],r=d.getElementById('realm'),f=d.forms[0];if(h.match(/visitornet(.*?)p=sn-postauth-show/))b?b.click():s.click(),f.submit();else if(h.match(/(^data:text\\/html;.*|(mmind\\.me|mobilemind\\..*?)\\/joj(\\/|\\?)?.*|visitornet(.*?)welcome\\.cgi)$/)){r?r.selectedIndex=1:0;d.getElementById('username').value=u;d.getElementById('password').value=p;d.getElementById('frmLogin')?d.getElementById('frmLogin').submit():0}else location.href='https://visitornet.boeing.com';void'_MmVERSION_'";
				}
				return p;
			}
		</script>
	</head>

	<body>
		<noscript><b>Javascript must be enabled for this app.</b></noscript>
		<h1>jump On Juniper v_MmVERSION_</h1>
		<div class="grp">
			<p>Use this to automate VisitorNet login. Follow steps below to create a bookmark.</p>
			<p><b>Using the bookmark:</b>&#32;Connect to Visitornet WiFi. Open Safari, then tap the bookmark 3 times to log-in. Wait between taps to allow the VisitorNet pages to load.</p>
			<p>See&#32;<a href="#notes" title="Notes &amp; Issues">Notes &amp; Troubleshooting</a>&#32;for more information.</p>
		</div>

		<h1>Step 1: Enter the text</h1>
		<div class="grp">
			<p>Enter the Username to paste and a Password. Then tap&#32;<b>Make jOJ Bookmark</b>&#32;to reload this page for Step 2.</p>
			<form id="pltMkr" method="GET" action= "." onSubmit="loadpg(pastelet(document.getElementById('username').value,document.getElementById('password').value)); return false">
				<label for="username">Username:&nbsp;
					<input type="text" id="username" name="uid" tabindex="1" class="pStr" size="9" maxlength="8" placeholder="username" autocorrect="off" autocomplete="off" autocapitalize="off" required autofocus>
				</label>
				<label for="password"><br>Password:&nbsp;
					<input type="password" id="password" tabindex="2" class="pStr" name="password" size="9" maxlength="8" required autocorrect="off" autocomplete="off" autocapitalize="off" spellcheck="false">
				</label>
				<br><br>
				<input type="submit" id="mkPltBtn" tabindex="3" value="Make jOJ Bookmark">
				&nbsp; &nbsp;
				<input type="reset" id="reset" value="Reset" onclick="location.href='//'+location.host+location.port+location.pathname">
				<br><br>
				<label id="yp" for="bmrk">Bookmark Address:&nbsp;
					<textarea id="bmrk" tabindex="4" cols="40" rows="5" wrap="soft" spellcheck="false" contenteditable>No Bookmark yet. See Step 1 instructions.</textarea>
				</label>
			</form>
			<p id="pal" style="display:none">Bookmark as link:&nbsp;<a id="pl"></a><br><br></p>
		</div>

		<h1>Step 2: Add a Bookmark</h1>
		<div class="grp">
			<p>Tap the action button on the toolbar. Then select&#32;<b>Add Bookmark.</b></p>
			<div class="fig"><img class="fig" src="img/bkaddi.png" alt="add bookmark" width="225" height="158"></div>
			<p>Take note of the name (or edit it), and then tap&#32;<b>Save</b>.</p>
			<div class="fig"><img src="img/bksavei.png" alt="save bookmark" width="264" height="175"></div>
		</div>

		<h1>Step 3: Edit the Bookmark</h1>
		<div class="grp">
			<p>First, tap on the text box with&#32;<b>Code for your bookmark</b>. Then&#32;<b>Select all</b>&#32;of the text and&#32;<b>Copy</b>&#32;it to the clipboard.</p>
			<p>Now edit the bookmark you added in step 2 to turn it into a javascript bookmark. Tap the Bookmarks button in the toolbar.</p>
			<p>Navigate to the bookmark you just saved.&#32;<i>Do not select the bookmark.</i>&nbsp;Tap&nbsp;<b>Edit</b>&nbsp;to make changes.</p>
			<div class="fig"><img src="img/bkopeni.png" alt="open bookmarks" width="264" height="160"></div>
			<p>In the&#32;<b>Edit</b>&#32;pop-over, tap on the bookmark name.</p>
			<div class="fig"><img src="img/bkmodifyi.png" alt="edit bookmarks" width="264" height="116"></div>
			<p>In the&#32;<b>Edit Bookmark</b>&#32;pop-over, tap in the field that begins with &ldquo;<code><b>http:</b></code>
				&rdquo;. It is easiest to replace all of it with the contents of the clipboard, so simply tap the circle with an X in it.</p>
			<div class="fig"><img src="img/bkedit1i.png" alt="edit bookmark start" width="264" height="124"></div>
			<p>Finally, tap and hold in the now empty&#32;<em>Address</em>&nbsp;field and select&#32;<b>Paste</b>. The updated book mark appears. The bookmark ends with:
			  &#32;<code>void('v_MmVERSION_')</code></p>
			<p>The bookmark code is quite long, but if you scroll to the start you'll see the bookmark begins:&#32;<code>javascript:var%20u=</code>&hellip;</p>
		</div>

		<h1>Step 4: Save the Bookmark</h1>
		<div class="grp">
			<p>Back-up a level in the edit pop-over by tapping the button to the left of &ldquo;Edit Bookmark&rdquo;.</p>
			<div class="fig"><img src="img/bkbacki.png" alt="open bookmarks" width="270" height="34"></div>
			<p>Save the bookmark by tapping&#32;<b>Done</b>.</p>
			<div class="fig"><img src="img/bkdonei.png" alt="edit bookmarks" width="270" height="34"></div>
		</div>

		<h1>Using jumpOnJuniper</h1>
		<div class="grp">
			<p>Connect to a VisitorNet WiFi radio. Tap the&#32;<em>jOJ</em>&#32;bookmark to go to VisitorNet sign-in page, then&#32;<em>again</em>&#32;
				to &ldquo;paste&rdquo; the stored username &amp; password. Finally, after the screen updates, tap the bookmark a third time to accept the Terms.</p>
			<p><b>PRO TIP</b></p>
			<p>Use the&#32;<a href="img/Always_Show_Bookmarks_bar.png">Settings app &mdash; Safari</a>&#32;settings to set&nbsp;<b>
				Always Show Bookmarks Bar</b>&#32;as&#32;<b>ON</b>&#32;and save (<i>or move</i>) the&#32;<em>jOJ</em>&#32;bookmark to the&#32;<b>
				Bookmarks Bar</b>&#32;folder. Then you can more quickly tap the link for your login.</p>
			<div class="fig"><img src="img/bkbarlinki.png" alt="open bookmarks" width="244" height="108"></div>
		</div>

		<h1>Notes &amp; Troubleshooting</h1>
		<div class="grp" id="notes">
			<p>Notes</p>
			<ol>
				<li>This is an off-hours project. If you find something to fix send email to:&#32;<a href="mailto:mobilemind%40pobox%2ecom">mobilemind&#64;pobox&#46;com</a>.</li>
				<li>Screen captures above don't depict the current javascript. Sorry.</li>
				<li>If you're unsure about entering your password; don't use this bookmark.</li>
			</ol>
			<p>Troubleshooting</p>
			<ul>
				<li>Ensure your VisitorNet credentials are correct and aren't expired.</li>
				<li>Use the latest bookmark version. The bookmark &ldquo;address&rdquo; ends with the version number in quotes. For example,&#32;
					<b><code>void'v_MmVERSION_'</code></b>&#32;would indicate you bookmark is current against the title of this page,&#32;
					<i>jumpOnJuniper&nbsp;<b>v_MmVERSION_</b></i>.</li>
				<li>Force a refresh of this page by holding down the shift key while clicking the browser refresh button. If the title of the page changes
					to a new number, then your browser had cached an old version of the page. Use the reloaded page to make or update your bookmark.</li>
			</ul>
			<p>Copyright &copy; 2012, 2013 Tom King. All rights reserved.</p>
		</div>
		<br>
	</body>
</html>
